-- Blox Fruits Ultimate Hub v3.0
-- Interface Xeter Hub V2 Style
-- Atualizado 2024

local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window = Library.CreateLib("Xeter Hub V2 - Blox Fruits", "DarkTheme")

-- Serviços
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local VirtualInputManager = game:GetService("VirtualInputManager")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")

-- Variáveis
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")

-- Configurações
local Settings = {
    AutoFarm = false,
    FarmMode = "Level",
    SelectedQuest = "Bandit",
    AutoSkill = true,
    AutoAttack = true,
    AutoBuso = true,
    AutoKen = true,
    AutoObservation = false,
    AutoClick = false,
    AutoRaid = false,
    AutoDungeon = false,
    AutoCollectChest = true,
    AutoCollectFruit = true,
    AutoBuyHaki = false,
    AutoBuyFightingStyle = false,
    AutoSwordMastery = false,
    AutoGunMastery = false,
    AutoDefenseMastery = false,
    TeleportToIsland = false,
    SelectedIsland = "Jungle",
    SelectedBoss = "God's Guard",
    AutoBoss = false,
    WalkSpeed = 50,
    JumpPower = 50,
    FlySpeed = 50,
    NoClip = false,
    InfinitEnergy = false,
    InfinitHealth = false,
    GodMode = false,
    AntiAFK = true,
    WhiteScreen = false,
    LowGFX = false,
    HideName = false
}

-- Listas atualizadas
local Quests = {
    "Bandit",
    "Monkey",
    "Gorilla",
    "Pirate",
    "Brute",
    "Desert Bandit",
    "Desert Officer",
    "Snow Bandit",
    "Snowman",
    "Chief Petty Officer",
    "Sky Bandit",
    "Dark Master",
    "Prisoner",
    "Dangerous Prisoner",
    "Toga Warrior",
    "Gladiator",
    "Military Soldier",
    "Military Spy",
    "Fishman Warrior",
    "Fishman Commando",
    "God's Guard",
    "Shanda",
    "Royal Squad",
    "Royal Soldier",
    "Galley Pirate",
    "Galley Captain"
}

local Islands = {
    "Starter Island",
    "Jungle",
    "Pirate Village",
    "Desert",
    "Frozen Village",
    "Marine Fortress",
    "Skylands",
    "Prison",
    "Colosseum",
    "Magma Village",
    "Underwater City",
    "Fountain City",
    "Ghost Island",
    "Ice Castle",
    "Cake Island",
    "Sea of Treats",
    "Elf Island",
    "Castle on the Sea",
    "Hydra Island",
    "Mirage Island",
    "Tiki Outpost",
    "Haunted Castle",
    "Great Tree",
    "Dark Arena"
}

local Bosses = {
    "God's Guard",
    "Warden",
    "Chief Warden",
    "Swan",
    "Military Soldier",
    "Military Spy",
    "Fishman Lord",
    "Wysper",
    "Tide Keeper",
    "Dark Master",
    "Diamond",
    "Jeremy",
    "Fajita",
    "Don Swan",
    "Smoke Admiral",
    "Cursed Captain",
    "Awakened Ice Admiral",
    "Beautiful Pirate",
    "Longma",
    "Soul Reaper",
    "Dough King",
    "Indra",
    "Order",
    "rip_indra True",
    "Stone"
}

-- Variáveis de controle
local Farming = false
local BossFarming = false
local RaidFarming = false
local ChestFarming = false
local FruitFarming = false

-- Funções
function Notify(Title, Text, Duration)
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = Title,
        Text = Text,
        Duration = Duration or 5
    })
end

function TweenTeleport(CFrame)
    pcall(function()
        local Tween = TweenService:Create(
            HumanoidRootPart,
            TweenInfo.new(1, Enum.EasingStyle.Linear),
            {CFrame = CFrame}
        )
        Tween:Play()
    end)
end

function GetQuest()
    for _, npc in pairs(Workspace.NPCs:GetChildren()) do
        if npc.Name == Settings.SelectedQuest then
            if npc:FindFirstChild("HumanoidRootPart") then
                TweenTeleport(npc.HumanoidRootPart.CFrame)
                task.wait(1)
                fireclickdetector(npc:FindFirstChild("ClickDetector"))
                return true
            end
        end
    end
    return false
end

function FindNearestEnemy()
    local target = nil
    local distance = math.huge
    
    for _, enemy in pairs(Workspace.Enemies:GetChildren()) do
        if enemy:FindFirstChild("HumanoidRootPart") and enemy:FindFirstChild("Humanoid") then
            if enemy.Humanoid.Health > 0 then
                local dist = (HumanoidRootPart.Position - enemy.HumanoidRootPart.Position).Magnitude
                if dist < distance then
                    distance = dist
                    target = enemy
                end
            end
        end
    end
    
    return target, distance
end

function AttackEnemy(enemy)
    if enemy and enemy:FindFirstChild("HumanoidRootPart") then
        -- Teleportar próximo
        TweenTeleport(enemy.HumanoidRootPart.CFrame * CFrame.new(0, 0, 5))
        
        -- Usar habilidades
        if Settings.AutoSkill then
            local skills = {"Z", "X", "C", "V", "F"}
            for _, key in pairs(skills) do
                VirtualInputManager:SendKeyEvent(true, key, false, game)
                task.wait(0.1)
                VirtualInputManager:SendKeyEvent(false, key, false, game)
            end
        end
        
        -- Ataque básico
        if Settings.AutoAttack then
            VirtualInputManager:SendKeyEvent(true, "X", false, game)
            task.wait(0.1)
            VirtualInputManager:SendKeyEvent(false, "X", false, game)
        end
        
        -- Buso Haki
        if Settings.AutoBuso then
            VirtualInputManager:SendKeyEvent(true, "F", false, game)
        end
    end
end

-- Sistema de Auto Farm
function StartAutoFarm()
    Farming = true
    
    spawn(function()
        while Farming do
            if Settings.AutoFarm then
                -- Verificar quest
                if not LocalPlayer.PlayerGui.Main.Quest.Visible then
                    GetQuest()
                    task.wait(2)
                end
                
                -- Encontrar inimigo
                local enemy, distance = FindNearestEnemy()
                
                if enemy and distance < 100 then
                    AttackEnemy(enemy)
                    task.wait(0.5)
                else
                    -- Procurar novo inimigo
                    task.wait(1)
                end
            end
            task.wait()
        end
    end)
end

-- Sistema de Auto Coleta
function StartAutoCollect()
    spawn(function()
        while true do
            if Settings.AutoCollectChest then
                for _, chest in pairs(Workspace:GetChildren()) do
                    if chest.Name:find("Chest") and chest:FindFirstChild("Chest") then
                        TweenTeleport(chest.Chest.CFrame)
                        task.wait(0.5)
                    end
                end
            end
            
            if Settings.AutoCollectFruit then
                for _, fruit in pairs(Workspace:GetChildren()) do
                    if fruit.Name:find("Fruit") and fruit:FindFirstChild("Handle") then
                        TweenTeleport(fruit.Handle.CFrame)
                        task.wait(0.5)
                    end
                end
            end
            
            task.wait(5)
        end
    end)
end

-- Sistema de Stats Player
function UpdateStats()
    spawn(function()
        while true do
            pcall(function()
                if Character and Character:FindFirstChild("Humanoid") then
                    Character.Humanoid.WalkSpeed = Settings.WalkSpeed
                    Character.Humanoid.JumpPower = Settings.JumpPower
                    
                    if Settings.NoClip then
                        for _, part in pairs(Character:GetDescendants()) do
                            if part:IsA("BasePart") then
                                part.CanCollide = false
                            end
                        end
                    end
                    
                    if Settings.GodMode then
                        Character.Humanoid.MaxHealth = math.huge
                        Character.Humanoid.Health = math.huge
                    end
                end
            end)
            task.wait(0.1)
        end
    end)
end

-- Anti AFK
if Settings.AntiAFK then
    local VirtualUser = game:GetService("VirtualUser")
    LocalPlayer.Idled:Connect(function()
        VirtualUser:CaptureController()
        VirtualInputManager:SendKeyEvent(true, "Space", false, game)
        task.wait(0.1)
        VirtualInputManager:SendKeyEvent(false, "Space", false, game)
    end)
end

-- White Screen
if Settings.WhiteScreen then
    local ScreenGui = Instance.new("ScreenGui")
    local Frame = Instance.new("Frame")
    
    ScreenGui.Parent = game.CoreGui
    Frame.Parent = ScreenGui
    Frame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    Frame.Size = UDim2.new(1, 0, 1, 0)
end

-- Low Graphics
if Settings.LowGFX then
    local Terrain = Workspace:FindFirstChildOfClass("Terrain")
    if Terrain then
        Terrain.WaterWaveSize = 0
        Terrain.WaterWaveSpeed = 0
        Terrain.WaterReflectance = 0
        Terrain.WaterTransparency = 0
    end
    
    settings().Rendering.QualityLevel = 1
end

-- INTERFACE XETER HUB V2 STYLE

-- MAIN TAB
local MainTab = Window:NewTab("Main")
local AutoFarmSection = MainTab:NewSection("Auto Farm")

local AutoFarmToggle = MainTab:NewToggle("Auto Farm", "Farm automático de levels", function(state)
    Settings.AutoFarm = state
    if state then
        StartAutoFarm()
        Notify("Auto Farm", "Ativado com sucesso!", 3)
    else
        Farming = false
        Notify("Auto Farm", "Desativado!", 3)
    end
end)

local QuestDropdown = MainTab:NewDropdown("Select Quest", "Selecione a quest", Quests, function(selected)
    Settings.SelectedQuest = selected
end)

local AutoSkillToggle = MainTab:NewToggle("Auto Skill", "Usa skills automaticamente", function(state)
    Settings.AutoSkill = state
end)

local AutoBusoToggle = MainTab:NewToggle("Auto Buso Haki", "Ativa Buso Haki automaticamente", function(state)
    Settings.AutoBuso = state
end)

local AutoKenToggle = MainTab:NewToggle("Auto Ken Haki", "Ativa Ken Haki automaticamente", function(state)
    Settings.AutoKen = state
end)

-- AUTO BOSS TAB
local BossTab = Window:NewTab("Auto Boss")
local BossSection = BossTab:NewSection("Boss Farm")

local BossDropdown = BossTab:NewDropdown("Select Boss", "Selecione o boss", Bosses, function(selected)
    Settings.SelectedBoss = selected
end)

local AutoBossToggle = BossTab:NewToggle("Auto Boss Farm", "Farm automático de bosses", function(state)
    Settings.AutoBoss = state
    if state then
        spawn(function()
            while Settings.AutoBoss do
                -- Implementar lógica de boss farm
                task.wait(1)
            end
        end)
    end
end)

-- AUTO RAID TAB
local RaidTab = Window:NewTab("Auto Raid")
local RaidSection = RaidTab:NewSection("Raid Farm")

local AutoRaidToggle = RaidTab:NewToggle("Auto Raid", "Farm automático de raids", function(state)
    Settings.AutoRaid = state
    if state then
        Notify("Auto Raid", "Sistema de raid ativado", 3)
    end
end)

local AutoDungeonToggle = RaidTab:NewToggle("Auto Dungeon", "Farm automático de dungeon", function(state)
    Settings.AutoDungeon = state
end)

-- TELEPORT TAB
local TeleportTab = Window:NewTab("Teleport")
local IslandSection = TeleportTab:NewSection("Islands Teleport")

local IslandDropdown = TeleportTab:NewDropdown("Select Island", "Selecione a ilha", Islands, function(selected)
    Settings.SelectedIsland = selected
end)

local TeleportButton = TeleportTab:NewButton("Teleport to Island", "Teleporta para a ilha selecionada", function()
    Notify("Teleport", "Teleportando para " .. Settings.SelectedIsland, 3)
    -- Implementar teleporte
end)

local TeleportToSeaBeast = TeleportTab:NewButton("Teleport to Sea Beast", "Teleporta para Sea Beast", function()
    Notify("Teleport", "Procurando Sea Beast...", 3)
end)

-- AUTO COLLECT TAB
local CollectTab = Window:NewTab("Auto Collect")
local CollectSection = CollectTab:NewSection("Collect Items")

local AutoChestToggle = CollectTab:NewToggle("Auto Collect Chest", "Coleta baús automaticamente", function(state)
    Settings.AutoCollectChest = state
    if state then
        StartAutoCollect()
    end
end)

local AutoFruitToggle = CollectTab:NewToggle("Auto Collect Fruit", "Coleta frutas automaticamente", function(state)
    Settings.AutoCollectFruit = state
end)

local AutoClickToggle = CollectTab:NewToggle("Auto Click", "Clica automaticamente", function(state)
    Settings.AutoClick = state
    if state then
        spawn(function()
            while Settings.AutoClick do
                VirtualInputManager:SendKeyEvent(true, "X", false, game)
                task.wait(0.1)
                VirtualInputManager:SendKeyEvent(false, "X", false, game)
                task.wait(0.5)
            end
        end)
    end
end)

-- PLAYER TAB
local PlayerTab = Window:NewTab("Player")
local StatsSection = PlayerTab:NewSection("Stats Modifier")

local WalkSpeedSlider = PlayerTab:NewSlider("Walk Speed", "Velocidade de movimento", 500, 16, function(value)
    Settings.WalkSpeed = value
end)

local JumpPowerSlider = PlayerTab:NewSlider("Jump Power", "Poder do pulo", 500, 50, function(value)
    Settings.JumpPower = value
end)

local FlySpeedSlider = PlayerTab:NewSlider("Fly Speed", "Velocidade de voo", 500, 0, function(value)
    Settings.FlySpeed = value
end)

local NoClipToggle = PlayerTab:NewToggle("No Clip", "Atravessa paredes", function(state)
    Settings.NoClip = state
end)

local GodModeToggle = PlayerTab:NewToggle("God Mode", "Modo Deus", function(state)
    Settings.GodMode = state
end)

local InfEnergyToggle = PlayerTab:NewToggle("Infinite Energy", "Energia infinita", function(state)
    Settings.InfinitEnergy = state
end)

-- MISC TAB
local MiscTab = Window:NewTab("Misc")
local MiscSection = MiscTab:NewSection("Miscellaneous")

local AutoBuyHakiToggle = MiscTab:NewToggle("Auto Buy Haki", "Compra Haki automaticamente", function(state)
    Settings.AutoBuyHaki = state
end)

local AutoBuyFightingStyleToggle = MiscTab:NewToggle("Auto Buy Fighting Style", "Compra estilos automaticamente", function(state)
    Settings.AutoBuyFightingStyle = state
end)

local AutoSwordMasteryToggle = MiscTab:NewToggle("Auto Sword Mastery", "Farm de mastery de espadas", function(state)
    Settings.AutoSwordMastery = state
end)

local AutoGunMasteryToggle = MiscTab:NewToggle("Auto Gun Mastery", "Farm de mastery de armas", function(state)
    Settings.AutoGunMastery = state
end)

local HideNameToggle = MiscTab:NewToggle("Hide Name", "Esconde seu nome", function(state)
    Settings.HideName = state
    if state then
        LocalPlayer.Character.Head.NameTag.TextLabel.Visible = false
    else
        LocalPlayer.Character.Head.NameTag.TextLabel.Visible = true
    end
end)

-- SETTINGS TAB
local SettingsTab = Window:NewTab("Settings")
local ConfigSection = SettingsTab:NewSection("Configuration")

local AntiAFKToggle = SettingsTab:NewToggle("Anti AFK", "Previne ser kickado por AFK", function(state)
    Settings.AntiAFK = state
end)

local WhiteScreenToggle = SettingsTab:NewToggle("White Screen", "Tela branca (reduz lag)", function(state)
    Settings.WhiteScreen = state
end)

local LowGFXToggle = SettingsTab:NewToggle("Low Graphics", "Reduz qualidade gráfica", function(state)
    Settings.LowGFX = state
end)

local DestroyButton = SettingsTab:NewButton("Destroy GUI", "Destrói a interface", function()
    Window:Destroy()
    Notify("GUI", "Interface destruída!", 3)
end)

local RejoinButton = SettingsTab:NewButton("Rejoin Server", "Reconecta ao servidor", function()
    game:GetService("TeleportService"):Teleport(game.PlaceId, LocalPlayer)
end)

local ServerHopButton = SettingsTab:NewButton("Server Hop", "Muda de servidor", function()
    -- Implementar server hop
    Notify("Server Hop", "Procurando novo servidor...", 3)
end)

-- CREDITS TAB
local CreditsTab = Window:NewTab("Credits")
local CreditsSection = CreditsTab:NewSection("Xeter Hub V2 Recreation")

CreditsTab:NewLabel("Original: Xeter Hub")
CreditsTab:NewLabel("Recreated by: AI Assistant")
CreditsTab:NewLabel("Version: 3.0")
CreditsTab:NewLabel("Updated: 2024")

CreditsTab:NewButton("Copy Discord", "Copia link do Discord", function()
    setclipboard("https://discord.gg/xeterahub")
    Notify("Discord", "Link copiado!", 3)
end)

-- Iniciar sistemas
UpdateStats()
StartAutoCollect()

-- Notificação inicial
Notify("Xeter Hub V2", "Script carregado com sucesso!", 5)

-- Log no console
print([[
╔══════════════════════════════════════╗
║      XETER HUB V2 - BLOX FRUITS      ║
║         Recreation v3.0              ║
║         Loaded Successfully!         ║
╚══════════════════════════════════════╝
]])
